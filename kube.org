#+STARTUP: show2levels
#+STARTUP: indent
#+TAGS: kubernetes

#+title: Kubernetes
#+author: Julien ROUZIERES

* kubectl

[[https://kubernetes.io/docs/reference/kubectl/quick-reference/][kubectl Quick Reference]]

** Contexts

[[https://kubernetes.io/docs/reference/kubectl/generated/kubectl_config/][kubectl config]]

*** Get all contexts

#+BEGIN_SRC shell
  kubectl config get-contexts
#+END_SRC

*** Use a context

#+BEGIN_SRC shell :var context="context"
  kubectl config use-context ${context}
#+END_SRC

*** Delete a context

#+BEGIN_SRC shell :var context="context"
  kubectl config delete-context ${context}
#+END_SRC

*** Get current context

#+BEGIN_SRC shell
  kubectl config current-context
#+END_SRC

** Namespaces

*** Get all namespaces

#+NAME: namespaces
#+BEGIN_SRC shell
  kubectl get namespaces
#+END_SRC

** Pods

*** Get all pods

#+NAME: pods
#+BEGIN_SRC shell
  kubectl get pods -A
#+END_SRC

*** Get all pods in a namespace

#+BEGIN_SRC shell :var namespace="namespace"
  kubectl get pods -n ${namespace}
#+END_SRC

** Resources

*** Get a resource

#+BEGIN_SRC shell :var type="pod" name="name" namespace="namespace" :results file :file config.yaml
  kubectl get ${type} ${name} -n ${namespace} -o yaml
#+END_SRC

*** Modify a resource

#+BEGIN_SRC shell
  kubectl apply -f config.yaml
#+END_SRC
